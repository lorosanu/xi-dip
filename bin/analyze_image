#!/usr/bin/ruby
# -*- encoding : utf-8 -*-

$LOAD_PATH.unshift 'lib/'
require 'xi_image'

if ARGV.length < 1
  puts 'Usage ./bin/analyze_image <image>'
  exit
end

XiImage::Config.load_yaml('conf/xi_image.yml')

img = XiImage::Image.new(ARGV[0])
puts "Size: #{img.size}"
puts "Format: #{img.format}"
puts "Colors:"
img.color_histogram
   .sort_by {|k,v| -v}
   .each {|k,v| puts "  - #{k.join('|')}: #{v}"}


puts "Exif:"
img.exif.each {|k,v| puts "  - #{k}: #{v}"}
